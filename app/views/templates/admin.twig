<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" type="text/css" href="../assets/styles/admin.css"/>
		<title>Admin Portal</title>
	</head>
	<body>
		<div id="a">
			<div id="books">
            <h3>Available Books</h3>
				<div id="table" style="width:20vw">
					<table>
						{% if availablebooks is not empty %}
							<tr>
								<th>Name</th>
								<th>Quantity</th>
							</tr>
							{% for book in availablebooks %}
								<tr>
									<td>
										{{ book.name }}
									</td>
									<td>
										{{ book.quantity }}
									</td>
								</tr>
							{% endfor %}
						{% endif %}
					</table>
				</div>
			</div>

			<div id="books">
				<h3>Books with Clients</h3>
				<div id="table">
					<table>
						{% if unavailablebooks is not empty  %}
							<tr>
								<th>Name</th>
								<th>User</th>
							</tr>
							{% for book in unavailablebooks %}
								<tr>
									<td>
										{{ book.name }}
									</td>
									<td>
										{{ book.uname }}
									</td>
								</tr>
							{% endfor %}
						{% endif %}
					</table>
				</div>
			</div>
		</div>
		<div id="b">
			<form action="/admin/addbook" method="POST">
				<br>
				<input type="text" name="name" id="entry" placeholder="BOOK NAME">
				<input type="text" name="quantity" id="entry" placeholder="Quantity">
				<br><br>
				<input type="submit" id="button" value="Add Book"/>
			</form>
			<form action="/admin/removebook" method="POST">
				<br>
				<input type="text" name="name" id="entry" placeholder="BOOK NAME">
				<input type="text" name="quantity" id="entry" placeholder="Quantity">
				<br><br>
				<input type="submit" id="button" value="Remove Book"/>
			</form>
		</div>
		<br><br>
		<div id="lists">
			<div id="c">
				<h4 id>List of Checkouts</h4>
				<div id="table">
					{% if checkout is not empty  %}
						<table>
							<tr>
								<th>Name</th>
								<th>User</th>
								<th>Action</th>
								<th>Action</th>
							</tr>
							{% for book in checkout %}
								<tr>
									<td>
										{{ book.name }}
									</td>
									<td>
										{{ book.uname }}
									</td>
									<div id="buttons">
										<td>
											<form action="/admin/approved" method="POST">
												<input type="text" name="name" value="{{ book.name }}" style="display:none">
												<input type="text" name="uname" value="{{ book.uname }}" style="display:none">
												<input type="submit" value="Approve" id="button">
											</form>
										</td>
										<td>
											<form action="/admin/disapproved" method="POST">
												<input type="text" name="name" value="{{ book.name }}" style="display:none">
												<input type="text" name="uname" value="{{ book.uname }}" style="display:none">
												<input type="submit" value="Disapprove" id="button">
											</form>
										</td>
									</div>
								</tr>
							{% endfor %}
						{% endif %}
					</table>
				</div>
				<br>
			</div>
			<div id="c">
				<h4>List of Checkins</h4>
				<div id="table">
					<table>
						{% if checkin is not empty  %}
							<tr>
								<th>Name</th>
								<th>User</th>
								<th>Fees</th>
								<th>Action</th>
								<th>Action</th>
							</tr>
							{% for book in checkin %}
								{% set fees=("now"|date("Y") - book.year) * 365 + ("now"|date("m") - book.month) *
                                    30 + ("now"|date("d")- book.date) %}
								<tr>
									<td>
										{{ book.name }}
									</td>
									<td>
										{{ book.uname }}
									</td>
									<td>
										{{ fees }}
									</td>
									<div id="buttons">
										<td>
											<form action="/admin/approvedreturn" method="POST">
												<input type="text" name="name" value="{{ book.name }}" style="display:none">
												<input type="text" name="uname" value="{{ book.uname }}" style="display:none">
												<input type="submit" value="Approve" id="button">
											</form>
										</td>
										<td>
											<form action="/admin/disapprovedreturn" method="POST">
												<input type="text" name="name" value="{{ book.name }}" style="display:none">
												<input type="text" name="uname" value="{{ book.uname }}" style="display:none">
												<input type="submit" value="Disapprove" id="button">
											</form>
										</td>
									</tr>
								</tr>
							</div>
						{% endfor %}
					{% endif %}
				</table>
			</div>
		</div>
		<div id="c">
			<h4>Admin Requests</h4>
			<div id="table">
				<table>
					{% if adminreq is not empty  %}
						<tr>
							<th>User</th>
							<th>Action</th>
							<th>Action</th>
						</tr>
						{% for request in adminreq %}
							<tr>
								<td>
									{{ request.uname }}
								</td>

								<div id="buttons">
									<td>
										<form action="/admin/approvedadmin" method="POST">
											<input type="text" name="name" value="{{ request.uname }}" style="display:none">
											<input type="submit" value="Approve" id="button">
										</form>
									</td>
									<td>
										<form action="/admin/disapprovedadmin" method="POST">
											<input type="text" name="name" value="{{ request.uname }}" style="display:none">
											<input type="submit" value="Disapprove" id="button">
										</form>
									</td>
								</div>
							</tr>

						{% endfor %}
					{% endif %}
				</table>
			</div>
		</body>
	</body>
</html></div></div><br><br><br><div><form action="/admin/logout" method="post" id="logout">
<button id="foo">Logout</button></form></div></body></html>
